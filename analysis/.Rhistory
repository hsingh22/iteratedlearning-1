library(tidyverse)
library(png)
library(grid)
library(xtable)
library(feather)
library(irr)
library(tidyboot)
library(directlabels)
library(lme4)
library(broom)
theme_set(theme_classic(base_size = 10))
data2 <- read.csv("tabletstudyresults.csv")
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0) %>%
select(-n) %>%
ungroup()
setwd("~/Documents/GitHub/iteratedlearning/analysis")
data2 <- read.csv("tabletstudyresults.csv")
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0) %>%
select(-n) %>%
ungroup()
View(data)
View(data)
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
# filter(n == 10 & condition != "test" & sub_id != 0) %>%
filter(n==10) %>%
select(-n) %>%
ungroup()
calculate_data <- data %>%
gather(row, value, -sub_id, -age, -condition, -generation, -date, -time, -trial)%>%
arrange(sub_id, trial) %>%
separate(row, c("type","row", "col")) %>%
spread(type,value) %>%
mutate(accuracy = if_else(input == target, 1, 0))
View(data)
View(data)
#data2 <- read.csv("tabletstudyresults.csv")
data2<-read.csv("iteratedstudyresults.csv")
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
# filter(n == 10 & condition != "test" & sub_id != 0) %>%
filter(n==10) %>%
select(-n) %>%
ungroup()
calculate_data <- data %>%
gather(row, value, -sub_id, -age, -condition, -generation, -date, -time, -trial)%>%
arrange(sub_id, trial) %>%
separate(row, c("type","row", "col")) %>%
spread(type,value) %>%
mutate(accuracy = if_else(input == target, 1, 0))
data2 <- read_csv("iteratedstudyresults.csv") %>%
select(sub_id:input_7_7)
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0) %>%
select(-n) %>%
ungroup()
calculate_data <- data %>%
gather(row, value, -sub_id, -age, -condition, -generation, -trial, -comments)%>%
arrange(sub_id, trial) %>%
separate(row, c("type","row", "col")) %>%
spread(type,value) %>%
mutate(accuracy = input == target,
sub_id = as.character(sub_id))
trial_data <- calculate_data %>%
filter(target == 1) %>%
group_by(trial, sub_id) %>%
summarise(accuracy = mean(accuracy)) %>%
tidyboot_mean(accuracy)
ggplot(trial_data, aes(x = trial, y = empirical_stat,
ymin = ci_lower, ymax = ci_upper)) +
geom_pointrange() +
geom_smooth()
View(calculate_data)
View(calculate_data)
View(calculate_data)
View(calculate_data)
View(trial_data)
# total grid accuracy
sum(calculate_data$accuracy)/5760 * 100
pdf("trial_data.pdf", width = 10, height = 10)
calculate_data %>%
distinct(trial, row, col, target) %>%
mutate(sub_id = "target") %>%
rename(input = target) %>%
bind_rows(select(calculate_data, sub_id, trial, row, col, input)) %>%
mutate(input = factor(input), sub_id = factor(sub_id, levels = unique(.$sub_id))) %>%
ggplot(aes(x = col, y = row, fill = input)) +
facet_grid(trial ~ sub_id) +
geom_tile(color = "black") +
scale_fill_manual(values = c("0" = "white", "1" = "black"), guide = F)
dev.off()
data2 <- read_csv("iteratedstudyresults.csv") %>%
select(sub_id:input_7_7)
data2 <- read_csv("iteratedstudyresults.csv") %>%
select(sub_id:input_7_7)
View(data2)
View(data2)
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0) %>%
select(-n) %>%
ungroup()
View(data2)
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0) %>%
filter(date == "7/30/2018") %>%
select(-n) %>%
ungroup()
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0) %>%
filter(date == "7/30/2018") %>%
select(-n) %>%
ungroup()
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0) %>%
filter(date = "7/30/2018") %>%
select(-n) %>%
ungroup()
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0.829012) %>%
select(-n) %>%
ungroup()
calculate_data <- data %>%
gather(row, value, -sub_id, -age, -condition, -generation, -trial, -comments)%>%
arrange(sub_id, trial) %>%
separate(row, c("type","row", "col")) %>%
spread(type,value) %>%
mutate(accuracy = input == target,
sub_id = as.character(sub_id))
trial_data <- calculate_data %>%
filter(target == 1) %>%
group_by(trial, sub_id) %>%
summarise(accuracy = mean(accuracy)) %>%
tidyboot_mean(accuracy)
ggplot(trial_data, aes(x = trial, y = empirical_stat,
ymin = ci_lower, ymax = ci_upper)) +
geom_pointrange() +
geom_smooth()
pdf("trial_data.pdf", width = 10, height = 10)
calculate_data %>%
distinct(trial, row, col, target) %>%
mutate(sub_id = "target") %>%
rename(input = target) %>%
bind_rows(select(calculate_data, sub_id, trial, row, col, input)) %>%
mutate(input = factor(input), sub_id = factor(sub_id, levels = unique(.$sub_id))) %>%
ggplot(aes(x = col, y = row, fill = input)) +
facet_grid(trial ~ sub_id) +
geom_tile(color = "black") +
scale_fill_manual(values = c("0" = "white", "1" = "black"), guide = F)
dev.off()
View(calculate_data)
View(calculate_data)
calculate_data <- data %>%
gather(row, value, -sub_id, -age, -condition, -generation, -trial, -comments)%>%
arrange(sub_id, trial) %>%
separate(row, c("type","row", "col")) %>%
spread(type,value) %>%
mutate(accuracy = input == target,
sub_id = as.character(sub_id))
View(calculate_data)
View(calculate_data)
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id != 0.829011977) %>%
select(-n) %>%
ungroup()
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & sub_id == 0.795517) %>%
select(-n) %>%
ungroup()
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & date == "7/30/18") %>%
select(-n) %>%
ungroup()
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & date == 7/30/2018) %>%
select(-n) %>%
ungroup()
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & time == 09:33:00) %>%
select(-n) %>%
ungroup()
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test" & time == "09:33:00") %>%
select(-n) %>%
ungroup()
data <- group_by(sub_id) %>%
mutate(sub_id_2 = n())
data <- data %>%
group_by(sub_id) %>%
mutate(sub_id_2 = n())
View(data2)
View(data2)
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test") %>%
select(-n) %>%
ungroup()
View(data)
View(data)
data2 <- read_csv("iteratedstudyresults.csv") %>%
select(sub_id:input_7_7)
#filters out people who didn't complete 10 trials
data <- data2 %>%
arrange(sub_id, trial) %>%
group_by(sub_id) %>%
mutate(n = n()) %>%
filter(n == 10 & condition != "test") %>%
select(-n) %>%
ungroup()
View(data)
data2 <- read_csv("iteratedstudyresults.csv") %>%
select(sub_id:input_7_7)
View(data2)
